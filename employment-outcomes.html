<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Employment Outcomes for Recent Graduates | Law School Outcomes</title>

    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>
  </head>
  <body>
    <h1><a href="index.html">Law School Outcomes</a></h1>
    <h2>Employment Outcomes for Recent Graduates</h2>

    <select id="year-selector">
      <option value="2015" selected>2015</option>
      <!--option value="2014">2014</option-->
    </select>

    <div id="my-container">
    </div>

    <footer>
      <p>
        <a href="https://data-creative.github.io/law-school-outcomes-dataviz/">view</a> |
        <a href="https://github.com/data-creative/law-school-outcomes-dataviz/">source</a> |
        <a href="https://raw.githubusercontent.com/data-creative/law-school-outcomes-dataviz/master/data/2015/employment_summary_reports.json">data</a>
      </p>
    </footer>

    <script src="http://d3js.org/colorbrewer.v1.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- PLEASE DON'T MESS WITH THE ORDER OF SCRIPTS BELOW THIS LINE -->
    <script type="text/javascript" src="assets/js/employment_outcomes/report.js"></script>
    <script type="text/javascript" src="assets/js/employment_outcomes/stacked_100_pct_chart.js"></script>
    <script type="text/javascript">

      var yearSelector = document.getElementById("year-selector")
      function selectYear() {
        var selectedYear = yearSelector.value
        console.log("SELECTED YEAR:", selectedYear)
        updateChart(selectedYear)
      }
      yearSelector.addEventListener("change", selectYear, false)




      function updateChart(year) {
        var url = `data/${year}/employment_summary_reports.json`

        d3.json(url, function(json){

          var reports = json.map(function(rpt){ return new Report(rpt) })

          var sortedReports = reports.sort(function(a, b){ return d3.ascending(a.schoolShortName, b.schoolShortName ) })

          var groupings = [
            {group: 'Employed (Other)', color: colorbrewer.Greys[9][6], types: ["Education", "Employer Type Unknown"] },
            {group: 'Public Interest', color: colorbrewer.Oranges[9][4], types: ["Pub. Int."] },
            {group: 'Government', color: colorbrewer.Oranges[9][6], types: ["Government"] },
            {group: 'Clerkship', color: colorbrewer.Purples[9][6], types: ["Clerkships - Federal", "Clerkships - State & Local", "Clerkships - Other"] },
            {group: 'Business & Industry', color: colorbrewer.Blues[9][6], types: ["Business & Industry"] },
            {group: 'Law Firm (Other)', color: colorbrewer.Greens[9][4], types: ["Law Firms (Unknown Size)", "Law Firms (Solo)", "Law Firms (2 - 10)", "Law Firms (11 - 25)", "Law Firms (26 - 50)", "Law Firms (51 - 100)"] },
            {group: 'Law Firm (Big)', color: colorbrewer.Greens[9][6], types: ["Law Firms (101 - 250)", "Law Firms (251 - 500)", "Law Firms (501 +)"] }
          ]

          var chart = new Stacked100PctChart(year, sortedReports, groupings)

          chart.updateOnto('my-container')

        }) // d3.json()

      } // updateChart()

      selectYear()

    </script>
  </body>
</html>
